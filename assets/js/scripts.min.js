$(document).ready(function () { $(".counter").length && $(".counter").counterUp(), $("#phone").length && ($("#phone").intlTelInput({ initialCountry: "auto", preferredCountries: ["us", "ca", "ru", "by", "ua", "kz", "az", "am", "pl", "lv", "lt", "gb", "de", "fr", "es", "it", "il"], nationalMode: !1, separateDialCode: !0, geoIpLookup: function (e) { $.get("https://ipinfo.io", function () { }, "jsonp").always(function (t) { var n = t && t.country ? t.country : "us"; e(n) }) }, utilsScript: "assets/js/intlTelInput/utils.min.js" }), $("#phone").on("open:countrydropdown", function () { $(this).removeAttr("maxlength") }), $("#phone").on("countrychange", function () { $(this).val(""), $(this).mask($(this).attr("placeholder").replace(/[1-9]/g, "0")) })), $("#signup").length && $("#signup form").on("submit", function (e) { e.preventDefault(); let t = $("#firstname", this).val(), n = $("#lastname", this).val(), r = $("#phone", this).intlTelInput("getSelectedCountryData").name, i = $("#phone", this).intlTelInput("getNumber"), o = [], a = "Organic search"; $("#messengers", this).find("input:checkbox:checked").each(function () { o.push($(this).val()) }), window.location.search && (a = new URLSearchParams(window.location.search).get("utm_source")), 0 === t.trim().length || 0 === n.trim().length ? Swal.fire({ icon: "error", timer: 1e4, title: "Ошибка", html: "Вы не ввели своё имя и фамилию.<br/>Давайте попробуем еще раз?" }) : 0 !== i.trim().length && $("#phone", this).intlTelInput("isValidNumber") ? 0 === o.length ? Swal.fire({ icon: "error", timer: 1e4, title: "Ошибка", html: "Вы забыли выбрать мессенджер для связи.<br/>Давайте попробуем еще раз?" }) : $.ajax({ url: "website/ajax/signup", method: "POST", data: { firstname: t, lastname: n, country: r, phone: i, messengers: o.join(", "), utm_source: a }, success: function (e) { e ? (Swal.fire({ icon: "success", timer: 1e4, title: "Успех!", html: "Мы только что получили вашу заявку!<br/>Ожидайте, пожалуйста, мы с Вами свяжемся!" }), $("#signup form").trigger("reset")) : Swal.fire({ icon: "error", timer: 1e4, title: "Ошибка", html: "Возникла какая-то непредвиденная ошибка.<br/>Мы не получили вашу заявку, но вы можете написать нам сами." }) } }) : Swal.fire({ icon: "error", timer: 1e4, title: "Ошибка", html: "Вы указали некорректный номер телефна.<br/>Давайте попробуем еще раз?" }) }), $("#reviews").length && ($("#reviews form").on("submit", function (e) { e.preventDefault(), Swal.fire({ icon: "error", timer: 1e4, title: "Ошибка", html: "Для того чтобы отправить отзыв, вы должны авторизоваться в личном кабинете.<br/>Давайте попробуем еще раз?" }) }), $("#reviews-more button", this).on("click", function () { $.ajax({ url: "website/ajax/reviews-load", method: "POST", data: { amount_current: $("#reviews-amount-shown").html() }, success: function (e) { $("#reviews-amount-all").html(e["reviews-amount-all"]), $("#reviews-amount-shown").html(e["reviews-amount-shown"]), $("#reviews-place").html(e.reviews), e["reviews-amount-all"] === e["reviews-amount-shown"] && $("#reviews-more").remove() } }) }), $("#reviews-more button").click()), $("#currency").length && $('#currency button[data-bs-toggle="tab"]').on("show.bs.tab", function (e) { let t = $(e.target).data("bsTarget"); $(t).addClass("active show").siblings(".tab-pane.active").removeClass("active show") }), $("#copyright-year").length && $("#copyright-year").html((new Date).getFullYear()) });